---
description: React components, JSX files, Material-UI, hooks, state management. File paths: src/components/, src/pages/, src/hooks/. Triggers: React, component, jsx, useState, useEffect, Material-UI, MUI, frontend, responsive, UI.
globs: 
alwaysApply: false
---
# ğŸ¯ MMM Checklist - Frontend Development Rules

## ğŸ“‹ BugÃ¼nkÃ¼ GÃ¼ncellemeler (2025-01-21)

### Bonus Evaluation System Fixes
- **NaN Display Prevention**: Fallback values for undefined scores
  ```javascript
  // âœ… DoÄŸru: NaN Ã¶nleme
  puanlama.puan || 0
  puanlama.maksimumPuan || 10
  const percentage = maxPuan > 0 ? ((puan / maxPuan) * 100) : 0;
  
  // âŒ YanlÄ±ÅŸ: NaN riski
  puanlama.puan
  (puan / maxPuan) * 100
  ```

- **Field Mapping Compatibility**: Backend-Frontend field uyumluluÄŸu
  ```javascript
  // âœ… Backward compatibility
  madde.baslik || madde.soru
  madde.puan || madde.kontrolPuani || 0
  madde.maksimumPuan || madde.maxPuan
  ```

### React Key Uniqueness Patterns
- **Unique Key Generation**: Duplicate key hatalarÄ±nÄ± Ã¶nleme
  ```javascript
  // âœ… DoÄŸru: Unique key patterns
  key={`${activity.tip || 'activity'}_${activity._id}_${index}`}
  key={`bonus_eval_${evaluation._id}`}
  key={`kalip_degisim_main_${evaluation._id}`}
  
  // âŒ YanlÄ±ÅŸ: Duplicate key riski
  key={activity._id}
  key={evaluation._id}
  ```

### Rating Component Safety
- **Safe Rating Values**: Material-UI Rating component gÃ¼venliÄŸi
  ```javascript
  // âœ… DoÄŸru: GÃ¼venli rating
  <Rating
    value={puan || 0}
    max={maksimumPuan || 10}
    readOnly
    precision={0.1}
  />
  
  // âŒ YanlÄ±ÅŸ: Undefined value riski
  <Rating value={puan} max={maksimumPuan} />
  ```

## ğŸ”§ React Best Practices

### Component Key Management
- Her list item iÃ§in unique key kullan
- Tip + ID + index kombinasyonu ile unique key oluÅŸtur
#### 1. KullanÄ±lmayan Import'lar Temizlendi
```javascript
// âœ… TestExcelDownload.js - KullanÄ±lmayan Upload icon kaldÄ±rÄ±ldÄ±
// âŒ Ã–NCE: 
import { Download, Upload } from '@mui/icons-material';

// âœ… SONRA: Sadece kullanÄ±lan import
import { Download } from '@mui/icons-material';

// âœ… MonthlyPerformance.js - KullanÄ±lmayan Material-UI import'larÄ±
// âŒ Ã–NCE: 
import {
  Box, Typography, Card, CardContent,
  Paper, Grid, Chip, IconButton, Tooltip,
} from '@mui/material';
import {
  TrendingUp as TrendingUpIcon,
  TrendingDown as TrendingDownIcon,
  VisibilityIcon,
} from '@mui/icons-material';
import {
  ResponsiveContainer, LineChart, Line,
  XAxis, YAxis, CartesianGrid,
  Tooltip as RechartsTooltip, Legend,
} from 'recharts';

// âœ… SONRA: Sadece kullanÄ±lan import'lar
import {
  Box, Typography, Card, CardContent,
  Grid, Chip, Avatar, LinearProgress,
} from '@mui/material';
import {
  TrendingUp as TrendingUpIcon,
  Assignment as AssignmentIcon,
} from '@mui/icons-material';
import {
  ResponsiveContainer, XAxis, YAxis, CartesianGrid,
  Tooltip as RechartsTooltip, AreaChart, Area,
} from 'recharts';

// âœ… OverviewDashboard.js - KullanÄ±lmayan prop kaldÄ±rÄ±ldÄ±
// âŒ Ã–NCE: const OverviewDashboard = ({ summary, dailyPerformance, onShowTaskDetails }) => {
// âœ… SONRA: const OverviewDashboard = ({ summary, dailyPerformance }) => {

// âœ… useWorkTaskData.js - KullanÄ±lmayan React hook import'u
// âŒ Ã–NCE: import { useState, useCallback, useEffect } from 'react';
// âœ… SONRA: import { useState, useCallback } from 'react';
```

#### 2. React Hook Dependencies DÃ¼zeltildi
```javascript
// âœ… useTaskScoring.js - useCallback dependency uyarÄ±sÄ± dÃ¼zeltildi
// âŒ Ã–NCE: Missing dependency 'onTabSwitch'
const submitScore = useCallback(async () => {
  // ... iÅŸlem kodlarÄ± ...
  
  // Puanlama sonrasÄ± onaylananlar tab'Ä±na geÃ§
  if (onTabSwitch) {
    setTimeout(() => {
      onTabSwitch(1); // Tab 1: Onaylananlar
    }, 1000);
  }
}, [
  selectedTask,
  scoringData,
  onSuccess,
  onError,
  onDataRefresh,
  closeScoreDialog,
]); // onTabSwitch eksik dependency

// âœ… SONRA: onTabSwitch dependency eklendi
}, [
  selectedTask,
  scoringData,
  onSuccess,
  onError,
  onDataRefresh,
  onTabSwitch, // âœ… Missing dependency eklendi
  closeScoreDialog,
]);

// âœ… ScoreDetails.js - useCallback ile dependency dÃ¼zeltmesi
// âŒ Ã–NCE: Missing dependency warning
useEffect(() => {
  loadScoreData();
}, [filters, page, sortBy, sortOrder]); // loadScoreData eksik

const loadScoreData = async () => {
  // API Ã§aÄŸrÄ±sÄ±
};

// âœ… SONRA: useCallback ile Ã§Ã¶zÃ¼m
const loadScoreData = useCallback(async () => {
  try {
    setLoading(true);
    const response = await myActivityAPI.getScoresDetail({
      ...filters, page, limit: 10, sortBy, sortOrder,
    });
    setScoreData(response.data);
  } catch (error) {
    console.error('Puan detaylarÄ± yÃ¼kleme hatasÄ±:', error);
  } finally {
    setLoading(false);
  }
}, [filters, page, sortBy, sortOrder]);

useEffect(() => {
  loadScoreData();
}, [loadScoreData]);
```

#### 3. KullanÄ±lmayan Parametreler ve DeÄŸiÅŸkenler DÃ¼zeltildi
```javascript
// âœ… ManualEntry.js - KullanÄ±lmayan state deÄŸiÅŸkenleri kaldÄ±rÄ±ldÄ±
// âŒ Ã–NCE: KullanÄ±lmayan upload state'leri
const [uploadProgress, setUploadProgress] = useState(0);
const [uploadResults, setUploadResults] = useState(null);
const [uploadYear, setUploadYear] = useState(new Date().getFullYear()); // KullanÄ±lmÄ±yor
const [uploadMonth, setUploadMonth] = useState(new Date().getMonth() + 1); // KullanÄ±lmÄ±yor

// âœ… SONRA: KullanÄ±lmayan deÄŸiÅŸkenler kaldÄ±rÄ±ldÄ±
const [uploadProgress, setUploadProgress] = useState(0);
const [uploadResults, setUploadResults] = useState(null);
// uploadYear ve uploadMonth kaldÄ±rÄ±ldÄ±

// âœ… MonthlyPerformance.js - onShowTaskDetails parametresi kaldÄ±rÄ±ldÄ±
// âŒ Ã–NCE: 
const MonthlyPerformance = ({ filters, onShowTaskDetails }) => {
  // onShowTaskDetails hiÃ§ kullanÄ±lmÄ±yor
  return <div>{/* component content */}</div>;
};

// âœ… SONRA:
const MonthlyPerformance = ({ filters }) => {
  // Sadece kullanÄ±lan prop'lar
  return <div>{/* component content */}</div>;
};

// âœ… OverviewDashboard.js - AynÄ± dÃ¼zeltme
// âŒ Ã–NCE: ({ summary, dailyPerformance, onShowTaskDetails })
// âœ… SONRA: ({ summary, dailyPerformance })
```

#### 4. Emoji Accessibility DÃ¼zeltildi âœ… YENÄ°
```javascript
// âœ… TestExcelDownload.js - Screen reader uyumluluÄŸu
// âŒ Ã–NCE: Accessible emoji uyarÄ±larÄ±
<Typography variant="h5" gutterBottom>
  ğŸ“Š Excel Download Test
</Typography>

<Typography variant="subtitle2" gutterBottom>
  ğŸ“‹ Yeni Basit Format - 4 Kolon:
</Typography>

<Typography variant="subtitle2" color="primary" gutterBottom>
  ğŸ“– KullanÄ±m Rehberi:
</Typography>

// âœ… SONRA: ARIA-compliant emoji'ler
<Typography variant="h5" gutterBottom>
  <span role="img" aria-label="grafik tablosu">ğŸ“Š</span> Excel Download Test
</Typography>

<Typography variant="subtitle2" gutterBottom>
  <span role="img" aria-label="pano">ğŸ“‹</span> Yeni Basit Format - 4 Kolon:
</Typography>

<Typography variant="subtitle2" color="primary" gutterBottom>
  <span role="img" aria-label="kitap">ğŸ“–</span> KullanÄ±m Rehberi:
</Typography>
```

### ğŸ”§ Runtime HatalarÄ± DÃ¼zeltmesi (2025-02-06)

#### 1. PropTypes HatasÄ± (Quality Control)
```javascript
// âŒ HATA: Failed prop type: The prop `evaluation.kalip.kod` is marked as required in `EvaluationDetail`, but its value is `undefined`.

// âŒ Ã–NCE: Required prop'lar
EvaluationDetail.propTypes = {
  evaluation: PropTypes.shape({
    kalip: PropTypes.shape({
      kod: PropTypes.string.isRequired, // âŒ Required ama undefined olabiliyor
      ad: PropTypes.string.isRequired,  // âŒ Required ama undefined olabiliyor
    }),
  }).isRequired,
};

// âœ… SONRA: Optional prop'lar
EvaluationDetail.propTypes = {
  evaluation: PropTypes.shape({
    kalip: PropTypes.shape({
      kod: PropTypes.string, // âœ… Optional
      ad: PropTypes.string,  // âœ… Optional
    }),
  }).isRequired,
};
```

#### 2. DOM Nesting HatasÄ± (QualityScores)
```javascript
// âŒ HATA: validateDOMNesting(...): <div> cannot appear as a descendant of <p>.

// âŒ Ã–NCE: Chip inside Typography (p > div)
<Typography variant="body2" sx={{ mb: 1 }}>
  <strong>Kategori:</strong>
  <Chip label={item.kategori} size="small" />
</Typography>

// âœ… SONRA: Box container with span Typography
<Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>
  <Typography variant="body2" component="span">
    <strong>Kategori:</strong>
  </Typography>
  <Chip label={item.kategori} size="small" />
</Box>
```

#### 3. GÃ¼venli KalÄ±p GÃ¶sterimi
```javascript
// âŒ Ã–NCE: Unsafe kalÄ±p gÃ¶sterimi
<Typography variant='body2' fontWeight='medium'>
  {`${evaluation.kalip.kod} - ${evaluation.kalip.ad}`} // âŒ Crash if undefined
</Typography>

// âœ… SONRA: Safe kalÄ±p gÃ¶sterimi
<Typography variant='body2' fontWeight='medium'>
  {evaluation.kalip?.kod && evaluation.kalip?.ad 
    ? `${evaluation.kalip.kod} - ${evaluation.kalip.ad}`
    : evaluation.kalip?.kod || evaluation.kalip?.ad || 'KalÄ±p bilgisi eksik'
  }
</Typography>
```

### ğŸ”§ ESLint DÃ¼zeltme Patterns

#### 1. Import Optimization
```javascript
// âŒ Gereksiz import'lar - Bundle size artÄ±rÄ±r
import {
  Paper, IconButton, Tooltip, // KullanÄ±lmÄ±yor
  Box, Typography, Card       // KullanÄ±lÄ±yor
} from '@mui/material';

// âœ… Sadece kullanÄ±lan import'lar
import { Box, Typography, Card } from '@mui/material';

// âŒ KullanÄ±lmayan icon import'larÄ±
import {
  VisibilityIcon,    // KullanÄ±lmÄ±yor
  TrendingUpIcon,    // KullanÄ±lÄ±yor
  TrendingDownIcon   // KullanÄ±lmÄ±yor
} from '@mui/icons-material';

// âœ… Sadece kullanÄ±lan icon'lar
import { TrendingUpIcon } from '@mui/icons-material';
```

#### 2. React Hook Dependencies
```javascript
// âŒ Missing dependency - ESLint uyarÄ±sÄ±
useEffect(() => {
  loadData();
}, [filters]); // loadData eksik

const loadData = async () => {
  // API call with filters
};

// âœ… useCallback ile dependency Ã§Ã¶zÃ¼mÃ¼
const loadData = useCallback(async () => {
  // API call with filters
}, [filters, page, sortBy]);

useEffect(() => {
  loadData();
}, [loadData]);

// âœ… Alternatif: Inline function
useEffect(() => {
  const loadData = async () => {
    // API call
  };
  loadData();
}, [filters, page, sortBy]);
```

#### 3. Prop Validation
```javascript
// âŒ KullanÄ±lmayan prop - ESLint uyarÄ±sÄ±
const Component = ({ data, onAction, unusedProp }) => {
  return (
    <div>
      {data.map(item => (
        <button key={item.id} onClick={() => onAction(item)}>
          {item.name}
        </button>
      ))}
    </div>
  );
};

// âœ… KullanÄ±lmayan prop kaldÄ±rÄ±ldÄ±
const Component = ({ data, onAction }) => {
  return (
    <div>
      {data.map(item => (
        <button key={item.id} onClick={() => onAction(item)}>
          {item.name}
        </button>
      ))}
    </div>
  );
};

// âœ… Alternatif: Underscore prefix
const Component = ({ data, onAction, unusedProp: _unusedProp }) => {
  // _unusedProp ESLint uyarÄ±sÄ± vermez
};
```

#### 4. Tree-Shaking Optimization
```javascript
// âŒ Bundle killer - TÃ¼m library import'u
import * as MUI from '@mui/material';
import * as Icons from '@mui/icons-material';

// âœ… Selective imports - Tree-shaking friendly
import { Button, TextField, Dialog } from '@mui/material';
import { Add as AddIcon, Edit as EditIcon } from '@mui/icons-material';

// âŒ Default import for large libraries
import moment from 'moment'; // TÃ¼m moment.js

// âœ… Specific imports
import { format, parseISO } from 'date-fns'; // Sadece gerekli fonksiyonlar
```

#### 5. PropTypes Best Practices
```javascript
// âœ… Safe PropTypes patterns
Component.propTypes = {
  // Required props
  id: PropTypes.string.isRequired,
  name: PropTypes.string.isRequired,
  
  // Optional props
  description: PropTypes.string,
  isActive: PropTypes.bool,
  
  // Nested objects - optional fields
  user: PropTypes.shape({
    id: PropTypes.string.isRequired,
    name: PropTypes.string.isRequired,
    email: PropTypes.string, // Optional
    avatar: PropTypes.string, // Optional
  }),
  
  // Arrays
  items: PropTypes.arrayOf(PropTypes.string),
  
  // Functions
  onClick: PropTypes.func,
  onSubmit: PropTypes.func.isRequired,
  
  // Enums
  status: PropTypes.oneOf(['active', 'inactive', 'pending']),
  
  // Any type (use sparingly)
  data: PropTypes.any,
};

// âœ… Default props
Component.defaultProps = {
  description: '',
  isActive: false,
  items: [],
  onClick: () => {},
};
```

## ğŸš€ FRONTEND CACHE SÄ°STEMÄ° (2025-02-06)

### Frontend Cache Service Integration âœ…
```javascript
// frontend/src/services/cacheService.js - Browser-based caching
import frontendCache from './cacheService';

// Cache TTL in milliseconds
frontendCache.TTL = {
  // SHORT CACHE (1-5 minutes)
  DASHBOARD: 2 * 60 * 1000,        // 2 min
  USER_TASKS: 2 * 60 * 1000,       // 2 min
  CONTROL_PENDING: 1 * 60 * 1000,  // 1 min
  MY_ACTIVITY: 3 * 60 * 1000,      // 3 min
  
  // MEDIUM CACHE (5-15 minutes)
  USERS_LIST: 10 * 60 * 1000,      // 10 min
  ROLES_LIST: 15 * 60 * 1000,      // 15 min
  DEPARTMENTS: 15 * 60 * 1000,     // 15 min
  MACHINES: 10 * 60 * 1000,        // 10 min
  INVENTORY: 10 * 60 * 1000,       // 10 min
  
  // LONG CACHE (15-60 minutes)
  TEMPLATES: 30 * 60 * 1000,       // 30 min
  SETTINGS: 60 * 60 * 1000,        // 60 min
};
```

### API Cache Wrapper Pattern âœ…
```javascript
// frontend/src/services/api.js - Cache wrapper function
const withCache = (apiCall, cacheKey, ttl = frontendCache.TTL.DASHBOARD, storage = 'memory') => {
  return async (...args) => {
    // Cache'den kontrol et
    const cachedData = frontendCache.get(cacheKey, storage);
    if (cachedData) {
      return { data: cachedData };
    }
    
    // Cache miss - API Ã§aÄŸrÄ±sÄ± yap
    const response = await apiCall(...args);
    
    // BaÅŸarÄ±lÄ± response'u cache'le
    if (response.data) {
      frontendCache.set(cacheKey, response.data, ttl, storage);
    }
    
    return response;
  };
};

// âœ… Cached API calls
export const usersAPI = {
  getAll: withCache(
    () => api.get('/users'),
    frontendCache.KEYS.USERS_LIST,
    frontendCache.TTL.USERS_LIST,
    'sessionStorage'
  ), // ğŸš€ CACHE: 10 dakika
  
  create: (userData) => {
    // Cache'i temizle
    frontendCache.invalidateUser();
    return api.post('/users', userData);
  },
  
  update: (id, userData) => {
    // Cache'i temizle
    frontendCache.invalidateUser(id);
    return api.put(`/users/${id}`, userData);
  },
};
```

### Cache Key Management âœ…
```javascript
// Cache key patterns
frontendCache.KEYS = {
  // Dashboard
  DASHBOARD_SUMMARY: (userId) => `dashboard_summary_${userId}`,
  DASHBOARD_ROLE: (role) => `dashboard_role_${role}`,
  
  // Users & Auth
  USER_PROFILE: (userId) => `user_profile_${userId}`,
  USERS_LIST: 'users_list',
  
  // Tasks
  USER_TASKS: (userId) => `user_tasks_${userId}`,
  CONTROL_PENDING: (userId) => `control_pending_${userId}`,
  
  // MyActivity
  MY_ACTIVITY_SUMMARY: (userId) => `my_activity_summary_${userId}`,
  MY_ACTIVITY_DETAILED: (userId, page) => `my_activity_detailed_${userId}_${page}`,
  MY_ACTIVITY_SCORES: (userId, type) => `my_activity_scores_${userId}_${type}`,
  
  // Inventory
  INVENTORY_DASHBOARD: 'inventory_dashboard',
  INVENTORY_CATEGORIES: 'inventory_categories',
  MACHINES_LIST: (source) => `machines_list_${source || 'all'}`,
};
```

### Cache Storage Options âœ…
```javascript
// Storage types: 'memory', 'localStorage', 'sessionStorage'

// Memory cache - Sayfa yenileme ile silinir
frontendCache.set(key, data, ttl, 'memory');

// Session storage - Tab kapanana kadar kalÄ±r
frontendCache.set(key, data, ttl, 'sessionStorage');

// Local storage - Manuel silinene kadar kalÄ±r
frontendCache.set(key, data, ttl, 'localStorage');
```

### Cache Invalidation Helpers âœ…
```javascript
// Cache invalidation on data changes
const handleUserUpdate = async (userData) => {
  try {
    await usersAPI.update(userId, userData);
    
    // Cache'i temizle
    frontendCache.invalidateUser(userId);
    
    // UI'yi gÃ¼ncelle
    showSnackbar('KullanÄ±cÄ± gÃ¼ncellendi', 'success');
  } catch (error) {
    showSnackbar('GÃ¼ncelleme hatasÄ±', 'error');
  }
};

// Pattern-based cache clearing
frontendCache.clearPattern('user_'); // TÃ¼m user cache'lerini temizle
frontendCache.clearPattern('inventory_'); // TÃ¼m inventory cache'lerini temizle
```

### React Hook Cache Integration âœ…
```javascript
// Custom hook with cache support
const useUsersData = () => {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);

  const loadUsers = useCallback(async () => {
    try {
      setLoading(true);
      
      // Cache'li API Ã§aÄŸrÄ±sÄ±
      const response = await usersAPI.getAll();
      setUsers(response.data);
    } catch (error) {
      console.error('Users loading error:', error);
    } finally {
      setLoading(false);
    }
  }, []);

  const createUser = useCallback(async (userData) => {
    try {
      await usersAPI.create(userData);
      
      // Cache temizlendikten sonra yeniden yÃ¼kle
      await loadUsers();
    } catch (error) {
      throw error;
    }
  }, [loadUsers]);

  useEffect(() => {
    loadUsers();
  }, [loadUsers]);

  return { users, loading, createUser, refreshUsers: loadUsers };
};
```

## ğŸš¨ GÃœNCEL DEÄÄ°ÅÄ°KLÄ°KLER (2025-02-06)

### ğŸ¯ MyActivity - Kontrol PuanlarÄ± Kart Entegrasyonu
```javascript
// âœ… YENÄ°: "Kontrol PuanlarÄ±m" segmenti â†’ "Genel Karnem" segmentine kart olarak taÅŸÄ±ndÄ±
// ScoreBreakdown.js component'ine kontrol puanlarÄ± kartÄ± eklendi

// Import'lar gÃ¼ncellendi
import controlScoresAPI from '../../services/controlScoresAPI';
import { SecurityIcon } from '@mui/icons-material';

// State eklendi
const [controlSummary, setControlSummary] = useState(null);
const [controlLoading, setControlLoading] = useState(false);
const [controlError, setControlError] = useState(null);

// API Ã§aÄŸrÄ±sÄ± eklendi
const loadControlScores = useCallback(async () => {
  try {
    setControlLoading(true);
    const response = await controlScoresAPI.getMySummary();
    setControlSummary(response.data);
  } catch (err) {
    setControlError(
      err.response?.data?.message ||
        'Kontrol puanlarÄ± yÃ¼klenirken hata oluÅŸtu',
    );
  } finally {
    setControlLoading(false);
  }
}, []);

// Grid yapÄ±sÄ±: md=6 â†’ md=4 deÄŸiÅŸimi (3'lÃ¼ hizalama iÃ§in)
<Grid item xs={12} md={4}>
  <Fade in={true} timeout={1700}>
    <Card sx={{
      height: '100%',
      border: '2px solid',
      borderColor: controlSummary?.genel?.toplamPuan > 0 ? 'purple' : 'grey.300',
      transition: 'all 0.3s ease',
      '&:hover': {
        transform: 'translateY(-4px)',
        boxShadow: '0 8px 25px rgba(0,0,0,0.15)',
      },
    }}>
      <CardContent>
        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>
          <Typography variant="h6" sx={{ fontWeight: 'bold', color: 'purple' }}>
            ğŸ›¡ï¸ Kontrol PuanlarÄ±
          </Typography>
          <SecurityIcon sx={{ color: 'purple', fontSize: 28 }} />
        </Box>
        
        {/* Puan gÃ¶sterimi */}
        <Typography variant="h3" sx={{ 
          fontWeight: 'bold', 
          color: 'purple', 
          textAlign: 'center', 
          mb: 1 
        }}>
          {controlSummary?.genel?.toplamPuan || 0}
        </Typography>
        
        {/* Alt bilgiler */}
        <Stack spacing={1}>
          <Chip
            label={`${controlSummary?.genel?.toplamGorev || 0} GÃ¶rev PuanlandÄ±`}
            size="small"
            sx={{ backgroundColor: 'purple', color: 'white' }}
          />
          <LinearProgress
            variant="determinate"
            value={Math.min(((controlSummary?.genel?.toplamPuan || 0) / 1000) * 100, 100)}
            sx={{ height: 8, borderRadius: 4 }}
          />
        </Stack>
      </CardContent>
    </Card>
  </Fade>
</Grid>
```

### ğŸ¯ MyActivity Tab YapÄ±sÄ± DÃ¼zenlendi
```javascript
// âŒ ESKÄ°: 8 tab (Kontrol PuanlarÄ±m ayrÄ± tab)
// âœ… YENÄ°: 7 tab (Kontrol PuanlarÄ± Genel Karnem'de kart olarak)

const tabs = [
  { id: 0, label: 'Genel BakÄ±ÅŸ' },
  { id: 1, label: 'DetaylÄ± Aktiviteler' },
  { id: 2, label: 'Genel Karnem' }, // â† Kontrol PuanlarÄ± kartÄ± burada
  { id: 3, label: 'Kalite Kontrol PuanlarÄ±m' },
  { id: 4, label: 'Ä°K PuanlarÄ±m' },
  { id: 5, label: 'GÃ¶rev PuanlarÄ±m' },
  { id: 6, label: 'SÄ±ralama' },
];

// Tab 2 yÃ¼kleme aksiyonu gÃ¼ncellendi
{
  id: 2,
  label: 'Genel Karnem',
  loadAction: async () => {
    await loadScoreBreakdown({ ...filters, tip: 'all' });
    await loadMonthlyTotals(filters);
    // Kontrol puanlarÄ± otomatik yÃ¼kleniyor (useEffect'te)
  },
}
```

### ğŸ§ª WorkTask Test Verisi OluÅŸturma âœ…
```javascript
// âœ… YENÄ°: backend/create-test-worktasks.js
// WorkTask test verileri:
// - 3 adet test WorkTask oluÅŸturuldu
// - ID'ler: 684685b4f6e91d8a01935914, 684685b4f6e91d8a01935919, 684685b4f6e91d8a0193591e
// - Machine model kullanÄ±mÄ± (InventoryItem yerine)
// - Required field'lar: makinaDurmaSaati, yeniKalipAktifSaati
// - 80-100% arasÄ± kontrol puanlarÄ±
// - TamamlanmÄ±ÅŸ ve onaylanmÄ±ÅŸ durumda

const workTask = new WorkTask({
  kullanici: adminUser._id,
  checklist: checklistTemplate._id,
  makina: makina._id,
  indirilenKalip: indirilenKalip._id,
  baglananHamade: baglananKalip._id,
  makinaDurmaSaati: new Date(Date.now() - (i * 24 * 60 * 60 * 1000) - (60 * 60 * 1000)), // 1 saat Ã¶nce durdu
  yeniKalipAktifSaati: new Date(Date.now() - (i * 24 * 60 * 60 * 1000) - (30 * 60 * 1000)), // 30 dk sonra aktif
  maddeler: checklistTemplate.maddeler.map((madde, index) => ({
    maddeId: madde._id,
    soru: madde.soru,
    yapildi: true,
    yapilmaTarihi: new Date(),
    puan: madde.puan,
    maxPuan: madde.puan,
    kontrolPuani: Math.floor(madde.puan * (0.8 + Math.random() * 0.2)), // 80-100% puan
    kontrolYorumu: `Test kontrol yorumu ${index + 1}`,
    yorum: `Test kullanÄ±cÄ± yorumu ${index + 1}`,
    resimUrl: '',
  })),
  durum: 'tamamlandi',
  toplamPuan: checklistTemplate.maddeler.reduce((sum, madde) => sum + madde.puan, 0),
  tamamlanmaTarihi: new Date(Date.now() - (i * 24 * 60 * 60 * 1000)), // i gÃ¼n Ã¶nce
  onaylayanKullanici: adminUser._id,
  onayTarihi: new Date(Date.now() - (i * 24 * 60 * 60 * 1000) + (2 * 60 * 60 * 1000)), // 2 saat sonra onaylanmÄ±ÅŸ
  onayNotu: `Test onay notu ${i}`,
});
```

### TaskDetailsModal React Render HatasÄ± DÃ¼zeltmeleri âœ…
```javascript
// âŒ ESKÄ°: Object render hatasÄ± veren kod
<Typography variant='h4'>
  {taskDetails.puanlar.kontrolToplamPuani || 0}
</Typography>

// âœ… YENÄ°: Backend data yapÄ±sÄ±na uygun dÃ¼zeltme
<Typography variant='h4'>
  {taskDetails.kontrolToplamPuani || 0}
</Typography>

// âŒ ESKÄ°: Object'i direkt render etme hatasÄ±
<strong>Makina:</strong> {taskDetails.makina} // Object render hatasÄ±

// âœ… YENÄ°: Backend string olarak dÃ¶ndÃ¼rÃ¼yor
<strong>Makina:</strong> {taskDetails.makina} // String format: "Makina AdÄ± (Envanter Kodu)"
```

### MyActivity API Integration âœ…
```javascript
// âœ… YENÄ°: TaskDetailsModal API endpoint
// GET /api/my-activity/task-details/:id
// Desteklenen task tipleri:
// - Normal Task (checklist)
// - WorkTask (worktask) 
// - HR Evaluation (hr_checklist_, hr_mesai_, hr_devamsizlik_)
// - Quality Control (quality_control)

const TaskDetailsModal = ({ open, onClose, taskId }) => {
  const [taskDetails, setTaskDetails] = useState(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    if (open && taskId) {
      loadTaskDetails();
    }
  }, [open, taskId]);

  const loadTaskDetails = async () => {
    try {
      setLoading(true);
      const response = await myActivityAPI.getTaskDetails(taskId);
      setTaskDetails(response.data);
    } catch (error) {
      console.error('Task details yÃ¼klenirken hata:', error);
      showSnackbar('GÃ¶rev detaylarÄ± yÃ¼klenemedi', 'error');
    } finally {
      setLoading(false);
    }
  };

  // âœ… Backend'den gelen data yapÄ±sÄ±:
  // {
  //   id: string,
  //   tip: 'checklist' | 'worktask' | 'hr_checklist' | 'quality_control',
  //   checklistAdi: string,
  //   kategori: string,
  //   makina: string, // "Makina AdÄ± (Envanter Kodu)" format
  //   kontrolToplamPuani: number, // Direkt eriÅŸim
  //   maddeler: [{ soru, maxPuan, kontrolPuani, sira, ... }]
  // }
};
```

### React Object Render Error Solutions âœ…
```javascript
// âŒ YANLIÅ: Objects are not valid as a React child
<Typography>
  {taskDetails.makina} // Object: {ad: "...", envanterKodu: "..."}
</Typography>

// âœ… DOÄRU: Backend string dÃ¶ndÃ¼rÃ¼yor
<Typography>
  {taskDetails.makina} // String: "Makina AdÄ± (Envanter Kodu)"
</Typography>

// âŒ YANLIÅ: Nested object access
{taskDetails.puanlar.kontrolToplamPuani}

// âœ… DOÄRU: Direct property access
{taskDetails.kontrolToplamPuani}

// âŒ YANLIÅ: Object in JSX
<p>
  <div>Content</div> // DOM validation error
</p>

// âœ… DOÄRU: Proper nesting
<Box>
  <Box>Content</Box>
</Box>
```

### Process.env Browser Compatibility âœ…
```javascript
// âŒ ESKÄ°: Browser'da crash eden kod
if (process.env.NODE_ENV === 'development') {
  console.log('Debug mode');
}

// âœ… YENÄ°: GÃ¼venli process.env kontrolÃ¼
if (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') {
  console.log('Debug mode');
}

// âœ… TaskDetailsModal'da gÃ¼venli debug
const TaskDetailsModal = ({ open, onClose, taskId }) => {
  const loadTaskDetails = async () => {
    try {
      // API call
      if (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') {
        console.log('ğŸ” TaskDetails Debug:', { taskId, taskDetails });
      }
    } catch (error) {
      console.error('Task details yÃ¼klenirken hata:', error);
    }
  };
};
```

### WorkTasks Mega Refactoring TamamlandÄ± âœ…
```javascript
// âœ… YENÄ° MODÃœLER YAPI (1037 â†’ 121 satÄ±r, %88 azalma)
WorkTasks.js (121 satÄ±r) - Ana sayfa component
â”œâ”€â”€ useWorkTaskData.js - Custom hook (data management)
â”œâ”€â”€ WorkTaskList.js - Checklist grid component  
â”œâ”€â”€ WorkTaskForm.js - Form dialog component
â””â”€â”€ WorkTaskList-simple.js - Emergency fallback

// âœ… WorkTask pattern - 3 aÅŸamalÄ± gÃ¶rev oluÅŸturma
const handleSubmit = async () => {
  // 1. GÃ¶revi oluÅŸtur
  const response = await workTasksAPI.create(submitData);
  
  // 2. Checklist maddelerini gÃ¼ncelle
  await workTasksAPI.updateItems(createdTask._id, { maddeler: completedItems });
  
  // 3. GÃ¶revi tamamla
  await workTasksAPI.complete(createdTask._id);
};
```

### API Standardizasyonu âœ…
```javascript
// âœ… BirleÅŸtirilmiÅŸ makina API kullanÄ±mÄ±
const machines = await inventoryAPI.getMachines('all'); // TÃ¼m makinalar
const machineDetail = await inventoryAPI.getMachineDetail(id);

// âŒ ESKÄ°: Deprecated API'ler - KULLANMA
tasksAPI.getInventoryMachines() â†’ inventoryAPI.getMachines() kullan
inventoryAPI.getMachinesForTasks() â†’ inventoryAPI.getMachines() kullan
```

### Temizlenen Dosyalar ve Organizasyon
- **Components**: TÃ¼m `.commented` dosyalar silindi (20+ adet)
- **Silinen dosyalar**: `Inventory.js.backup` ve diÄŸer backup dosyalarÄ±
- **HR ModÃ¼lÃ¼ temizliÄŸi**:
  - Silinen: `UserManagement.js`, `HRUserManagement.js`, `UserDialog.js`
  - Eklenen: `UserManagementHR.js` (HR modÃ¼lÃ¼ iÃ§in Ã¶zel component)
- **Yeni organizasyon**:
  ```
  components/
  â”œâ”€â”€ Inventory/
  â”‚   â”œâ”€â”€ CategoryDialog.js
  â”‚   â”œâ”€â”€ ItemDialog.js
  â”‚   â”œâ”€â”€ FieldTemplateDialog.js
  â”‚   â”œâ”€â”€ ExcelUploadDialog.js
  â”‚   â””â”€â”€ ...diÄŸer inventory bileÅŸenleri
  â”œâ”€â”€ Quality/
  â”‚   â”œâ”€â”€ QualityControlEvaluation.js
  â”‚   â”œâ”€â”€ QualityControlStatistics.js
  â”‚   â””â”€â”€ QualityControlTemplates.js
  â”œâ”€â”€ Dashboard/
  â”‚   â””â”€â”€ DashboardCards.js
  â”œâ”€â”€ WorkTask/ (YENÄ° MODÃœL)
  â”‚   â”œâ”€â”€ useWorkTaskData.js
  â”‚   â”œâ”€â”€ WorkTaskList.js
  â”‚   â”œâ”€â”€ WorkTaskForm.js
  â”‚   â””â”€â”€ WorkTaskList-simple.js
  â””â”€â”€ HR/
      â””â”€â”€ UserManagementHR.js
  ```

## ğŸ”§ Process.env GÃ¼venlik KurallarÄ± (YENÄ° ZORUNLU)

### Browser Compatibility Fix
```javascript
// âŒ YANLIÅ: process undefined hatasÄ±
if (process.env.NODE_ENV === 'development') {
  console.log('Development mode');
}

// âœ… DOÄRU: GÃ¼venli process kontrol pattern
if (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') {
  console.log('Development mode');
}

// âœ… Production build kontrol
if (typeof process !== 'undefined' && process.env?.NODE_ENV === 'production') {
  // Production-only kod
}

// âœ… Custom environment variable
if (typeof process !== 'undefined' && process.env?.REACT_APP_DEBUG === 'true') {
  // Debug mode
}
```

### Utility Functions Pattern
```javascript
// utils/debugLogger.js pattern
const isDevelopment = (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') || false;
const isDebugEnabled = (typeof process !== 'undefined' && process.env?.REACT_APP_DEBUG === 'true') || isDevelopment;

// utils/performanceMonitor.js pattern
export const initPerformanceDashboard = () => {
  if (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') {
    console.log('ğŸš€ Performance Monitoring Active');
  }
};
```

## ğŸ§© ModÃ¼ler Component Pattern (WorkTasks Example)

### Custom Hook Pattern
```javascript
// useWorkTaskData.js - Data management hook
export const useWorkTaskData = () => {
  const { hasModulePermission } = useAuth();
  const [loading, setLoading] = useState(true);
  const [checklists, setChecklists] = useState([]);
  
  // ğŸ“– Promise.all optimization
  const loadData = useCallback(async (showSnackbar) => {
    const [checklistsRes, makinalarRes, kaliplarRes] = await Promise.all([
      workTasksAPI.getChecklists(),
      inventoryAPI.getMachines('all'),
      inventoryAPI.getKalipsForTasks(),
    ]);
    // ...
  }, []);

  // ğŸ“¤ Business logic encapsulation
  const createWorkTask = useCallback(async (submitData, showSnackbar) => {
    // 3-step process: create â†’ updateItems â†’ complete
  }, []);

  return {
    loading, checklists, makinalar, kaliplar,
    loadData, createWorkTask,
    hasData: checklists.length > 0,
    isReady: !loading && hasModulePermission('YaptÄ±m'),
  };
};
```

### Component Composition Pattern
```javascript
// WorkTasks.js - Main page (121 satÄ±r)
const WorkTasks = () => {
  const { hasModulePermission, user } = useAuth();
  const { showSnackbar } = useSnackbar();
  
  // ğŸ¯ Custom Hook usage
  const {
    loading, submitting, checklists, makinalar, kaliplar,
    createWorkTask, isReady,
  } = useWorkTaskData();

  // ğŸ¯ Local state for UI
  const [openForm, setOpenForm] = useState(false);
  const [selectedChecklist, setSelectedChecklist] = useState(null);

  const handleFormSubmit = async (submitData) => {
    const result = await createWorkTask(submitData, showSnackbar);
    if (result.success) handleFormClose();
  };

  return (
    <>
      <Container maxWidth='xl'>
        {/* ğŸ§© ModÃ¼ler component usage */}
        <WorkTaskList
          checklists={checklists}
          onChecklistSelect={handleChecklistSelect}
          loading={loading}
          hasPermission={isReady}
        />
      </Container>

      <WorkTaskForm
        open={openForm}
        onClose={handleFormClose}
        selectedChecklist={selectedChecklist}
        makinalar={makinalar}
        kaliplar={kaliplar}
        onSubmit={handleFormSubmit}
        submitting={submitting}
      />
    </>
  );
};
```

## ğŸ”§ Common React Errors & Solutions

### DOM Validation Errors
```javascript
// âŒ YANLIÅ: <p> iÃ§inde <div> kullanÄ±mÄ± DOM validation hatasÄ± verir
<ListItemText
  primary={<Typography variant="h6">BaÅŸlÄ±k</Typography>}
  secondary={
    <p style={{ color: '#666' }}>
      <div><strong>Tip:</strong> {activity.type}</div>
      <div><strong>Tarih:</strong> {activity.date}</div>
    </p>
  }
/>

// âœ… DOÄRU: Box veya Typography kullan
<ListItemText
  primary={<Typography variant="h6">BaÅŸlÄ±k</Typography>}
  secondary={
    <Box sx={{ color: '#666' }}>
      <Box><strong>Tip:</strong> {activity.type}</Box>
      <Box><strong>Tarih:</strong> {activity.date}</Box>
    </Box>
  }
/>
```

### React Key Prop Warning
```javascript
// âŒ YANLIÅ: Key prop eksik
{items.map((item) => (
  <ListItem>
    <ListItemText primary={item.name} />
  </ListItem>
))}

// âœ… DOÄRU: Her zaman unique key kullan
{items.map((item, index) => (
  <ListItem key={item.id || `item-${index}`}>
    <ListItemText primary={item.name} />
  </ListItem>
))}
```

### Type Coercion Errors
```javascript
// âŒ YANLIÅ: Logical AND string dÃ¶ndÃ¼rebilir
const isFormValid = () => {
  return formData.ad.trim() && formData.rol && formData.maddeler.length > 0;
};
// formData.ad.trim() string dÃ¶ndÃ¼rÃ¼r, logical AND ilk truthy deÄŸeri dÃ¶ndÃ¼rÃ¼r

// âœ… DOÄRU: Double negation ile boolean'a Ã§evir
const isFormValid = () => {
  return !!(formData.ad.trim() && formData.rol && formData.maddeler.length > 0);
};

// âœ… DOÄRU: Boolean constructor kullan
const isFormValid = () => {
  return Boolean(formData.ad.trim() && formData.rol && formData.maddeler.length > 0);
};
```

### Material-UI Select Component Errors
```javascript
// âŒ YANLIÅ: Multi-select'te object array value kullanÄ±mÄ±
<Select
  multiple
  value={selectedMachines} // Object array
  onChange={(e) => setSelectedMachines(e.target.value)} // String array dÃ¶ner!
>

// âœ… DOÄRU: ID array kullan ve onChange'de convert et
<Select
  multiple
  value={selectedMachines.map(m => m._id)}
  onChange={(e) => {
    const selectedIds = e.target.value;
    const selectedObjects = selectedIds.map(id => 
      allMachines.find(m => m._id === id)
    ).filter(Boolean);
    setSelectedMachines(selectedObjects);
  }}
>
```

## React Component YapÄ±sÄ± (Zorunlu Pattern)
```javascript
const ComponentName = () => {
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");
  const [data, setData] = useState([]);

  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    try {
      setLoading(true);
      const response = await apiService.getData();
      setData(response.data);
    } catch (error) {
      setError("Veri yÃ¼klenirken hata oluÅŸtu");
    } finally {
      setLoading(false);
    }
  };

  if (loading) return <CircularProgress />;

  return (
    <Box>
      {error && <Alert severity="error">{error}</Alert>}
      {/* Component content */}
    </Box>
  );
};
```

## State Management KurallarÄ±
- **Local State**: `useState` kullan
- **Global State**: Context API kullan
- **API State**: Loading + Error + Success states ZORUNLU
- **Form State**: Controlled components tercih et
- **Custom Hooks**: Data management iÃ§in custom hook'lar oluÅŸtur
- **Cache State**: Frontend cache service kullan

## Material-UI KurallarÄ±
- **Styling**: SADECE `sx` prop kullan
- **Grid**: Normal `Grid` kullan (`Grid2` YASAKLI)
- **Responsive**: `{ xs: 1, sm: 2, md: 3 }` format
- **Touch-friendly**: Button minimum 44px height
- **Icons**: Material Icons kullan

## Import KurallarÄ± (Performance)
```javascript
// âœ… Tree-shaking friendly
import { Button, TextField, Box } from "@mui/material";
import { Delete, Edit, Add } from "@mui/icons-material";

// âœ… ModÃ¼ler import paths
import CategoryDialog from '../components/Inventory/CategoryDialog';
import useWorkTaskData from '../components/WorkTask/useWorkTaskData';

// âŒ Bundle killer - YASAKLI
import * as MUI from "@mui/material";
import * as Icons from "@mui/icons-material";
```

## API Call Patterns
```javascript
// âœ… Paralel API calls
const [users, tasks] = await Promise.all([
  api.getUsers(),
  api.getTasks()
]);

// âœ… BirleÅŸtirilmiÅŸ makina API kullanÄ±mÄ±
const machines = await inventoryAPI.getMachines('all'); // TÃ¼m makinalar
const machineDetail = await inventoryAPI.getMachineDetail(id);

// âœ… Cache'li API calls
const users = await usersAPI.getAll(); // Otomatik cache

// âŒ Sequential - YASAKLI
const users = await api.getUsers();
const tasks = await api.getTasks();
```

## WorkTasks ModÃ¼lÃ¼ Pattern (GÃœNCEL)
```javascript
// âœ… WorkTask form submission pattern
const handleSubmit = async () => {
  try {
    setSubmitting(true);
    
    // 1. GÃ¶revi oluÅŸtur
    const response = await workTasksAPI.create(submitData);
    const createdTask = response.data;
    
    // 2. Checklist maddelerini gÃ¼ncelle
    await workTasksAPI.updateItems(createdTask._id, { maddeler: completedItems });
    
    // 3. GÃ¶revi tamamla
    await workTasksAPI.complete(createdTask._id);
    
    showSnackbar('GÃ¶rev baÅŸarÄ±yla tamamlandÄ±!', 'success');
  } catch (error) {
    showSnackbar(error.response?.data?.message || error.message, 'error');
  } finally {
    setSubmitting(false);
  }
};
```

## Error Handling
- Her API call'da try-catch zorunlu
- User-friendly TÃ¼rkÃ§e error messages
- Loading states her async operation'da
- Process.env gÃ¼venlik kontrolÃ¼ zorunlu

## Component Organization
- `frontend/src/components/` altÄ±nda organize et
- Her modÃ¼l kendi klasÃ¶rÃ¼nde
- Custom hook'lar component klasÃ¶rÃ¼ iÃ§inde
- `.commented` veya `.backup` dosyalar YASAKLI

### Checklist ModÃ¼lÃ¼ Organizasyonu (GÃœNCEL - 2025-06-08)
```
components/
â”œâ”€â”€ Checklists/
â”‚   â”œâ”€â”€ ChecklistCard.js - Checklist kartÄ± (deÄŸerlendirme saatleri gÃ¶sterimi)
â”‚   â”œâ”€â”€ ChecklistDialog.js - Checklist form dialog'u (deÄŸerlendirme ayarlarÄ±)
â”‚   â”œâ”€â”€ TemplateScheduleManager.js - DeÄŸerlendirme saatleri yÃ¶netimi (YENÄ°)
â”‚   â””â”€â”€ useChecklistDialog.js - Form state yÃ¶netimi hook'u
```

### Checklist DeÄŸerlendirme Saatleri Pattern
```javascript
// useChecklistDialog.js - DeÄŸerlendirme saatleri state yÃ¶netimi
const [degerlendirmeSaatleri, setDegerlendirmeSaatleri] = useState([]);
const [degerlendirmePeriyodu, setDegerlendirmePeriyodu] = useState(2);
const [degerlendirmeGunleri, setDegerlendirmeGunleri] = useState([]);
const [degerlendirmeSikligi, setDegerlendirmeSikligi] = useState('GÃ¼nlÃ¼k');
const [aktif, setAktif] = useState(true);

// Saat ekleme/silme fonksiyonlarÄ±
const handleAddSchedule = (schedule) => {
  setDegerlendirmeSaatleri([...degerlendirmeSaatleri, schedule]);
};

const handleRemoveSchedule = (index) => {
  setDegerlendirmeSaatleri(degerlendirmeSaatleri.filter((_, i) => i !== index));
};

// TemplateScheduleManager.js - DeÄŸerlendirme saatleri UI
<TemplateScheduleManager
  schedules={degerlendirmeSaatleri}
  onAddSchedule={handleAddSchedule}
  onRemoveSchedule={handleRemoveSchedule}
/>

// ChecklistDialog.js - DeÄŸerlendirme ayarlarÄ± bÃ¶lÃ¼mÃ¼
<Box sx={{ mt: 3 }}>
  <Typography variant="h6" gutterBottom>
    DeÄŸerlendirme AyarlarÄ±
  </Typography>
  
  {/* Aktif/Pasif durumu */}
  <FormControlLabel
    control={<Switch checked={aktif} onChange={(e) => setAktif(e.target.checked)} />}
    label="Åablon Aktif"
  />
  
  {/* DeÄŸerlendirme periyodu slider */}
  <Typography gutterBottom>
    DeÄŸerlendirme Periyodu: {degerlendirmePeriyodu} saat
  </Typography>
  <Slider
    value={degerlendirmePeriyodu}
    onChange={(e, value) => setDegerlendirmePeriyodu(value)}
    min={1}
    max={8}
    marks
    valueLabelDisplay="auto"
  />
  
  {/* DeÄŸerlendirme sÄ±klÄ±ÄŸÄ± */}
  <FormControl fullWidth sx={{ mt: 2 }}>
    <InputLabel>DeÄŸerlendirme SÄ±klÄ±ÄŸÄ±</InputLabel>
    <Select
      value={degerlendirmeSikligi}
      onChange={(e) => setDegerlendirmeSikligi(e.target.value)}
    >
      <MenuItem value="GÃ¼nlÃ¼k">GÃ¼nlÃ¼k</MenuItem>
      <MenuItem value="HaftalÄ±k">HaftalÄ±k</MenuItem>
      <MenuItem value="AylÄ±k">AylÄ±k</MenuItem>
      <MenuItem value="Ã–zel">Ã–zel</MenuItem>
    </Select>
  </FormControl>
</Box>
```

### Checklist Madde Ã–zellikleri Pattern
```javascript
// Madde ekleme/dÃ¼zenleme dialog'unda yeni checkbox'lar
<FormControlLabel
  control={
    <Checkbox
      checked={madde.fotografGereklimi || false}
      onChange={(e) => handleMaddeChange(index, 'fotografGereklimi', e.target.checked)}
    />
  }
  label="FotoÄŸraf Gerekli"
/>

<FormControlLabel
  control={
    <Checkbox
      checked={madde.zorunlu !== false} // Default true
      onChange={(e) => handleMaddeChange(index, 'zorunlu', e.target.checked)}
    />
  }
  label="Zorunlu Madde"
/>
```

## Performance ZorunluluklarÄ±
- `

## Makina SeÃ§imi ZorunluluÄŸu (2025-02-06) âš ï¸

### Rutin GÃ¶revler (Task)
```javascript
// âœ… useTaskDialog.js - Makina kontrolÃ¼ ZORUNLU
const handleTaskComplete = async (onSuccess, onError) => {
  try {
    setCompleting(true);

    // Makina kontrolÃ¼ - ZORUNLU
    const finalMakina = taskData.makina || selectedTask?.makina?._id;

    if (!finalMakina) {
      onError('âš ï¸ Makina seÃ§imi zorunludur! LÃ¼tfen bir makina seÃ§in.');
      setCompleting(false);
      return;
    }

    const completeData = {
      maddeler: processedMaddeler,
      makina: finalMakina,
    };

    await tasksAPI.complete(selectedTask._id, completeData);
    onSuccess('GÃ¶rev baÅŸarÄ±yla tamamlandÄ±! ğŸ‰');
  } catch (error) {
    onError(error.response?.data?.message || error.message);
  }
};

// âœ… TaskDialog.js - Makina seÃ§im alanÄ± ZORUNLU
{selectedTask.durum === 'bekliyor' && !taskData.makina && (
  <Box sx={{ p: { xs: 1.5, md: 3 }, bgcolor: 'error.light', borderBottom: '1px solid', borderColor: 'error.main' }}>
    <Alert severity="error" sx={{ mb: 2 }}>
      <AlertTitle>Makina SeÃ§imi Zorunlu!</AlertTitle>
      GÃ¶revi tamamlayabilmek iÃ§in mutlaka bir makina seÃ§melisiniz.
    </Alert>
    
    <FormControl fullWidth required error={!taskData.makina}>
      <InputLabel>Makina SeÃ§in *</InputLabel>
      <Select
        value={taskData.makina || ''}
        onChange={(e) => setTaskData({ ...taskData, makina: e.target.value })}
        label="Makina SeÃ§in *"
      >
        {selectedMachines.map((machine) => (
          <MenuItem key={machine._id} value={machine._id}>
            {machine.makinaNo || machine.kod} - {machine.ad}
          </MenuItem>
        ))}
      </Select>
      <FormHelperText>
        {!taskData.makina && 'LÃ¼tfen Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ±z makinayÄ± seÃ§in'}
      </FormHelperText>
    </FormControl>
  </Box>
)}
```

### Ä°ÅŸe BaÄŸlÄ± GÃ¶revler (WorkTask)
```javascript
// âœ… WorkTaskForm.js - Makina seÃ§imi ZORUNLU
const handleSubmit = () => {
  // Validation
  if (!selectedChecklist || !formData.selectedMakina) {
    console.error('âŒ Form submit failed: Missing required data');
    return;
  }

  const submitData = {
    checklistId: selectedChecklist._id,
    makinaId: formData.selectedMakina._id, // ZORUNLU
    // ... diÄŸer alanlar
  };

  onSubmit(submitData);
};

// Submit butonu makina seÃ§ilmeden disabled
<Button
  onClick={handleSubmit}
  disabled={submitting || !selectedChecklist || !formData.selectedMakina}
  variant='contained'
  size='large'
>
  {submitting ? 'Kaydediliyor...' : 'KalÄ±p DeÄŸiÅŸim GÃ¶revini Tamamla'}
</Button>
```

## API Call Patterns
```

## ğŸš¨ React UyarÄ±larÄ± ve HatalarÄ± (2025-02-06) âœ… YENÄ°

### PropTypes HatasÄ± Ã‡Ã¶zÃ¼mÃ¼
```javascript
// âŒ HATA: The prop `formData.aciklama` is marked as required but its value is `undefined`.

// âŒ YANLIÅ: Required prop tanÄ±mÄ±
TemplateFormDialog.propTypes = {
  formData: PropTypes.shape({
    aciklama: PropTypes.string.isRequired, // âŒ Required ama undefined olabilir
  }).isRequired,
};

// âœ… DOÄRU: Optional prop tanÄ±mÄ±
TemplateFormDialog.propTypes = {
  formData: PropTypes.shape({
    aciklama: PropTypes.string, // âœ… Optional
  }).isRequired,
};

// âœ… Component'te safe value handling
<TextField
  value={formData.aciklama || ''} // âœ… Undefined protection
  onChange={(e) => onFormChange('aciklama', e.target.value)}
/>
```

### DOM Nesting HatasÄ± Ã‡Ã¶zÃ¼mÃ¼
```javascript
// âŒ HATA: <div> cannot appear as a descendant of <p>

// âŒ YANLIÅ: ListItemText iÃ§inde div kullanÄ±mÄ±
<ListItemText
  primary={
    <Box sx={{ display: 'flex', alignItems: 'center' }}> // âŒ <p> iÃ§inde <div>
      <Typography variant='body1'>
        {item.title}
      </Typography>
    </Box>
  }
  secondary={
    <Box> // âŒ <p> iÃ§inde <div>
      <Typography variant='body2'>
        {item.description}
      </Typography>
    </Box>
  }
/>

// âœ… DOÄRU: component="span" kullanÄ±mÄ±
<ListItemText
  primary={
    <Box component="span" sx={{ display: 'flex', alignItems: 'center' }}> // âœ… <span>
      <Typography variant='body1' component="span">
        {item.title}
      </Typography>
    </Box>
  }
  secondary={
    <Box component="span"> // âœ… <span>
      <Typography variant='body2' component="span">
        {item.description}
      </Typography>
    </Box>
  }
/>
```

### Material-UI Typography DOM Nesting Fix
```javascript
// âŒ YANLIÅ: Typography iÃ§inde Chip (p > div)
<Typography variant="body2">
  <strong>Kategori:</strong>
  <Chip label={item.kategori} size="small" /> // âŒ <p> iÃ§inde <div>
</Typography>

// âœ… DOÄRU: Box container kullanÄ±mÄ±
<Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>
  <Typography variant="body2" component="span">
    <strong>Kategori:</strong>
  </Typography>
  <Chip label={item.kategori} size="small" sx={{ ml: 1 }} />
</Box>

// âœ… DOÄRU: Typography span component
<Typography variant="body2" component="div" sx={{ display: 'flex', alignItems: 'center' }}>
  <span><strong>Kategori:</strong></span>
  <Chip label={item.kategori} size="small" sx={{ ml: 1 }} />
</Typography>
```

### Quality Control Template Specific Fixes
```javascript
// âœ… TemplateFormDialog.js - PropTypes dÃ¼zeltmesi
TemplateFormDialog.propTypes = {
  formData: PropTypes.shape({
    ad: PropTypes.string.isRequired,
    aciklama: PropTypes.string, // âœ… Optional (required kaldÄ±rÄ±ldÄ±)
    rol: PropTypes.string.isRequired,
    aktif: PropTypes.bool.isRequired,
    maddeler: PropTypes.array.isRequired,
    degerlendirmeSaatleri: PropTypes.array.isRequired,
    degerlendirmeSikligi: PropTypes.string.isRequired,
    degerlendirmePeriyodu: PropTypes.number.isRequired,
  }).isRequired,
};

// âœ… TemplateItemsManager.js - DOM nesting dÃ¼zeltmesi  
<ListItemText
  primary={
    <Box component="span" sx={{ display: 'flex', alignItems: 'center' }}>
      <Typography variant='body1' component="span" sx={{ flex: 1 }}>
        {index + 1}. {madde.baslik}
      </Typography>
      <Chip label={`${madde.maksimumPuan} puan`} size='small' color='primary' />
    </Box>
  }
  secondary={
    <Box component="span">
      {madde.aciklama && (
        <Typography variant='body2' color='text.secondary' component="span">
          {madde.aciklama}
        </Typography>
      )}
    </Box>
  }
/>
```

### ESLint Trailing Comma Fix
```javascript
// âŒ YANLIÅ: Missing trailing comma
roles: PropTypes.arrayOf(
  PropTypes.shape({
    _id: PropTypes.string.isRequired,
    ad: PropTypes.string.isRequired,
  }) // âŒ Trailing comma eksik
).isRequired,

// âœ… DOÄRU: Trailing comma eklenmeli
roles: PropTypes.arrayOf(
  PropTypes.shape({
    _id: PropTypes.string.isRequired,
    ad: PropTypes.string.isRequired,
  }), // âœ… Trailing comma
).isRequired,
```

### React PropTypes Best Practices (GÃœNCEL)
```javascript
// âœ… Safe PropTypes patterns
Component.propTypes = {
  // Required props
  id: PropTypes.string.isRequired,
  name: PropTypes.string.isRequired,
  
  // Optional props
  description: PropTypes.string,
  isActive: PropTypes.bool,
  
  // Nested objects - optional fields
  user: PropTypes.shape({
    id: PropTypes.string.isRequired,
    name: PropTypes.string.isRequired,
    email: PropTypes.string, // Optional
    avatar: PropTypes.string, // Optional
  }),
  
  // Arrays
  items: PropTypes.arrayOf(PropTypes.string),
  
  // Functions
  onClick: PropTypes.func,
  onSubmit: PropTypes.func.isRequired,
  
  // Enums
  status: PropTypes.oneOf(['active', 'inactive', 'pending']),
  
  // Any type (use sparingly)
  data: PropTypes.any,
};
```

### DOM Validation Best Practices
```javascript
// âœ… Material-UI component patterns

// 1. ListItemText iÃ§inde Box kullanÄ±mÄ±
<ListItemText
  primary={<Box component="span">{content}</Box>}
  secondary={<Box component="span">{content}</Box>}
/>

// 2. Typography iÃ§inde interactive elements
<Typography variant="body2" component="div">
  <span>Text content</span>
  <Button>Action</Button>
</Typography>

// 3. Chip inside text content
<Box sx={{ display: 'flex', alignItems: 'center' }}>
  <Typography component="span">Label:</Typography>
  <Chip label="value" size="small" />
</Box>

// 4. Complex nested content
<Box component="div"> // âœ… Explicit div
  <Typography variant="h6">Title</Typography>
  <Box> // âœ… Nested Box is OK
    <Typography>Content</Typography>
  </Box>
</Box>
```

## ğŸš¨ React UyarÄ±larÄ± ve HatalarÄ± (2025-02-06) âœ… YENÄ°

### Inventory Field Templates Sorunu Ã‡Ã¶zÃ¼mÃ¼ âœ…

#### Problem Analizi
```javascript
// âŒ SORUN: Field templates API Ã§aÄŸrÄ±sÄ± baÅŸarÄ±lÄ± ama frontend'de gÃ¶rÃ¼nmÃ¼yor
// Console Log SÄ±rasÄ±:
// 1. âœ… Categories API yanÄ±t: 3 kategori
// 2. âœ… Items API yanÄ±t: 13 item  
// 3. ğŸ”§ Field templates yÃ¼kleniyor, categoryId: 68380aa8b945226655fd3a9b
// 4. ğŸ” ItemDynamicFields Debug: categoryFieldTemplates: 0 (SORUN BURADA!)

// âŒ Root Cause: loadFieldTemplates fonksiyonu Ã§aÄŸrÄ±lÄ±yor ama log gÃ¶rÃ¼nmÃ¼yor
```

#### Ã‡Ã¶zÃ¼m AdÄ±mlarÄ±
```javascript
// âœ… 1. API Endpoint KontrolÃ¼
// Backend: POST /api/inventory/categories/:id/fields âœ… MEVCUT
// Frontend: inventoryAPI.getCategoryFields(categoryId) âœ… DOÄRU

// âœ… 2. loadFieldTemplates Debug Pattern
const loadFieldTemplates = useCallback(async (categoryId) => {
  console.log('ğŸš€ ENTERED loadFieldTemplates function with categoryId:', categoryId);
  console.log('ğŸ” CategoryId type:', typeof categoryId);
  console.log('ğŸ” CategoryId value:', categoryId);
  
  if (!categoryId) {
    console.log('âŒ No categoryId provided to loadFieldTemplates');
    setFieldTemplates([]);
    return;
  }

  try {
    console.log('ğŸ”§ Loading field templates for categoryId:', categoryId);
    console.log('ğŸŒ Making API call to:', `/api/inventory/categories/${categoryId}/fields`);
    
    const response = await inventoryAPI.getCategoryFields(categoryId);
    
    console.log('âœ… Field templates response received');
    console.log('ğŸ“Š Response status:', response.status);
    console.log('ğŸ“¦ Response data:', response.data);
    console.log('ğŸ”¢ Templates count:', response.data?.length || 0);
    
    if (response.data && response.data.length > 0) {
      console.log('ğŸ” First template:', response.data[0]);
      console.log('ğŸ” Sample template fields:', {
        ad: response.data[0]?.ad,
        tip: response.data[0]?.tip,
        gerekli: response.data[0]?.gerekli,
        kategoriId: response.data[0]?.kategoriId,
      });
    }
    
    setFieldTemplates(response.data || []);
  } catch (error) {
    console.error('âŒ Field template yÃ¼kleme hatasÄ±:', error);
    console.error('ğŸ” Error details:', {
      message: error.message,
      status: error.response?.status,
      statusText: error.response?.statusText,
      data: error.response?.data,
      url: error.config?.url,
    });
    
    if (error.response?.status === 404) {
      console.error(
        "ğŸš« Endpoint bulunamadÄ± - backend'de /categories/:id/fields endpoint'i eksik olabilir",
      );
    }
    
    setFieldTemplates([]);
  }
}, []);

// âœ… 3. ItemEdit Debug Pattern
const handleItemEdit = async (item) => {
  console.log('ğŸ¯ handleItemEdit called with item:', item);
  
  try {
    setSelectedItem(item);
    
    if (item.kategoriId) {
      const categoryId =
        typeof item.kategoriId === 'object'
          ? item.kategoriId._id
          : item.kategoriId;
      console.log('ğŸ”§ Field templates yÃ¼kleniyor, categoryId:', categoryId);
      console.log('ğŸ” loadFieldTemplates function type:', typeof loadFieldTemplates);
      console.log('ğŸ” loadFieldTemplates function:', loadFieldTemplates);
      
      console.log('â³ About to call loadFieldTemplates...');
      await loadFieldTemplates(categoryId);
      console.log('âœ… loadFieldTemplates completed successfully');
    }
    
    setItemDialogOpen(true);
    console.log('âœ… Item dialog opened successfully');
  } catch (error) {
    console.error('âŒ Error in handleItemEdit:', error);
    console.error('ğŸ” Error stack:', error.stack);
    setError('Field templates yÃ¼klenirken hata oluÅŸtu: ' + error.message);
  }
};
```

### MyActivity Yenilikleri âœ…

#### BirleÅŸtirilmiÅŸ Task Detail Support
```javascript
// âœ… YENÄ°: Multi-type task detail support
const TaskDetailDialog = ({ taskId, open, onClose }) => {
  const [taskDetails, setTaskDetails] = useState(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    if (open && taskId) {
      loadTaskDetails();
    }
  }, [open, taskId]);

  const loadTaskDetails = async () => {
    try {
      setLoading(true);
      const response = await myActivityAPI.getTaskDetails(taskId);
      setTaskDetails(response.data);
    } catch (error) {
      console.error('Task details error:', error);
    } finally {
      setLoading(false);
    }
  };

  const renderTaskContent = () => {
    if (!taskDetails) return null;

    switch (taskDetails.tip) {
      case 'checklist':
        return <ChecklistTaskDetails task={taskDetails} />;
      case 'worktask':
        return <WorkTaskDetails task={taskDetails} />;
      case 'hr_checklist':
      case 'hr_mesai':
      case 'hr_devamsizlik':
        return <HRTaskDetails task={taskDetails} />;
      case 'quality_control':
        return <QualityControlDetails task={taskDetails} />;
      default:
        return <div>Bilinmeyen gÃ¶rev tipi: {taskDetails.tip}</div>;
    }
  };

  return (
    <Dialog open={open} onClose={onClose} maxWidth="lg" fullWidth>
      <DialogTitle>{taskDetails?.checklistAdi || 'GÃ¶rev DetaylarÄ±'}</DialogTitle>
      <DialogContent>
        {loading ? (
          <CircularProgress />
        ) : (
          renderTaskContent()
        )}
      </DialogContent>
    </Dialog>
  );
};
```

#### MyActivity API Pattern
```javascript
// âœ… YENÄ°: MyActivity API service
export const myActivityAPI = {
  // Ana endpoint'ler
  getSummary: () => api.get('/my-activity/summary'),
  getScoresDetail: (params) => {
    const queryString = new URLSearchParams(params).toString();
    return api.get(`/my-activity/scores-detail${queryString ? `?${queryString}` : ''}`);
  },
  getRanking: () => api.get('/my-activity/ranking'),
  
  // âœ… YENÄ°: Task details (multi-type support)
  getTaskDetails: (id) => api.get(`/my-activity/task-details/${id}`),
  
  // Control scores
  getControlScoresSummary: () => api.get('/control-scores/my-summary'),
};

// âœ… Usage pattern
const useMyActivityData = () => {
  const [summary, setSummary] = useState(null);
  const [scoresDetail, setScoresDetail] = useState([]);
  const [ranking, setRanking] = useState([]);
  const [controlSummary, setControlSummary] = useState(null);
  const [loading, setLoading] = useState(false);

  const loadSummary = useCallback(async () => {
    try {
      setLoading(true);
      const response = await myActivityAPI.getSummary();
      setSummary(response.data);
    } catch (error) {
      console.error('Summary error:', error);
    } finally {
      setLoading(false);
    }
  }, []);

  const loadScoresDetail = useCallback(async (tip, ay, yil) => {
    try {
      const params = { tip };
      if (ay) params.ay = ay;
      if (yil) params.yil = yil;
      
      const response = await myActivityAPI.getScoresDetail(params);
      setScoresDetail(response.data || []);
    } catch (error) {
      console.error('Scores detail error:', error);
    }
  }, []);

  return {
    summary,
    scoresDetail,
    ranking,
    controlSummary,
    loading,
    loadSummary,
    loadScoresDetail,
  };
};
```

## ğŸ¯ Frontend Debugging Patterns âœ…

### React Hook Debug Pattern
```javascript
// âœ… Custom hook debugging
const useInventoryData = () => {
  const [fieldTemplates, setFieldTemplates] = useState([]);
  
  // Debug state changes
  useEffect(() => {
    console.log('ğŸ“Š fieldTemplates state updated:', {
      count: fieldTemplates.length,
      firstTemplate: fieldTemplates[0],
      allTemplates: fieldTemplates
    });
  }, [fieldTemplates]);

  const loadFieldTemplates = useCallback(async (categoryId) => {
    console.log('ğŸ”„ loadFieldTemplates called with:', categoryId);
    
    try {
      const response = await inventoryAPI.getCategoryFields(categoryId);
      console.log('ğŸ“¦ API response:', response.data);
      
      setFieldTemplates(response.data || []);
      console.log('âœ… fieldTemplates state updated');
    } catch (error) {
      console.error('âŒ loadFieldTemplates error:', error);
      setFieldTemplates([]);
    }
  }, []);

  return {
    fieldTemplates,
    loadFieldTemplates,
  };
};
```

### Component Debug Pattern
```javascript
// âœ… Component debugging
const ItemDynamicFields = ({ categoryFieldTemplates, selectedCategory }) => {
  // Debug props
  useEffect(() => {
    console.log('ğŸ” ItemDynamicFields Debug:');
    console.log('   categoryFieldTemplates:', categoryFieldTemplates?.length || 0);
    console.log('   fieldTemplatesLoading:', fieldTemplatesLoading);
    console.log('   selectedCategory:', selectedCategory);
    
    if (categoryFieldTemplates && categoryFieldTemplates.length > 0) {
      console.log('   First template:', categoryFieldTemplates[0]);
    }
  }, [categoryFieldTemplates, selectedCategory]);

  // Render debugging
  if (!categoryFieldTemplates || categoryFieldTemplates.length === 0) {
    console.log('ğŸš« No field templates to render');
    return (
      <Alert severity="info">
        Bu kategori iÃ§in henÃ¼z alan ÅŸablonu tanÄ±mlanmamÄ±ÅŸ.
      </Alert>
    );
  }

  console.log(`âœ… Rendering ${categoryFieldTemplates.length} field templates`);
  // Component render logic...
};
```

### API Debug Helpers
```javascript
// âœ… API debugging utilities
const debugAPI = {
  logRequest: (method, url, data) => {
    console.log(`ğŸŒ ${method.toUpperCase()} ${url}`);
    if (data) console.log('ğŸ“¤ Request data:', data);
  },
  
  logResponse: (response) => {
    console.log('ğŸ“¥ Response:', {
      status: response.status,
      data: response.data,
      headers: response.headers
    });
  },
  
  logError: (error) => {
    console.error('âŒ API Error:', {
      message: error.message,
      status: error.response?.status,
      data: error.response?.data,
      url: error.config?.url
    });
  }
};

// Axios interceptors for debugging
api.interceptors.request.use(
  (config) => {
    if (process.env.NODE_ENV === 'development') {
      debugAPI.logRequest(config.method, config.url, config.data);
    }
    return config;
  },
  (error) => {
    debugAPI.logError(error);
    return Promise.reject(error);
  }
);

api.interceptors.response.use(
  (response) => {
    if (process.env.NODE_ENV === 'development') {
      debugAPI.logResponse(response);
    }
    return response;
  },
  (error) => {
    debugAPI.logError(error);
    return Promise.reject(error);
  }
);
```

## React Hook KurallarÄ± (Zorunlu)

### useState Pattern
```javascript
// âœ… DOÄRU: Destructuring ve clear naming
const [users, setUsers] = useState([]);
const [loading, setLoading] = useState(false);
const [error, setError] = useState('');

// âŒ YANLIÅ: Generic naming
const [data, setData] = useState();
const [state, setState] = useState();
```

### useEffect Dependencies
```javascript
// âœ… DOÄRU: Complete dependencies
useEffect(() => {
  const loadData = async () => {
    setLoading(true);
    try {
      const response = await api.getUsers(filters);
      setUsers(response.data);
    } catch (error) {
      setError(error.message);
    } finally {
      setLoading(false);
    }
  };
  
  loadData();
}, [filters]); // filters dependency dahil

// âŒ YANLIÅ: Missing dependencies
useEffect(() => {
  loadUsers(filters);
}, []); // filters missing
```

### Custom Hook Pattern
```javascript
// âœ… DOÄRU: Reusable custom hook
const useUserManagement = () => {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const loadUsers = useCallback(async () => {
    setLoading(true);
    setError('');
    try {
      const response = await userService.getAll();
      setUsers(response.data);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  }, []);

  const createUser = useCallback(async (userData) => {
    try {
      await userService.create(userData);
      await loadUsers(); // Refresh list
    } catch (err) {
      setError(err.message);
      throw err;
    }
  }, [loadUsers]);

  return {
    users,
    loading,
    error,
    loadUsers,
    createUser,
    setError
  };
};
```

## Material-UI Styling (Zorunlu)

### sx Prop Pattern
```javascript
// âœ… DOÄRU: sx prop kullanÄ±mÄ±
<Box
  sx={{
    display: 'flex',
    flexDirection: 'column',
    gap: 2,
    p: 3,
    bgcolor: 'background.paper',
    borderRadius: 1,
    boxShadow: 1
  }}
>
  Content
</Box>

// âŒ YANLIÅ: Inline styles
<div style={{ display: 'flex', padding: '24px' }}>
  Content
</div>
```

### Theme Integration
```javascript
// âœ… DOÄRU: Theme-aware styling
<Typography
  variant="h4"
  sx={{
    color: 'primary.main',
    fontWeight: 'bold',
    mb: 2,
    background: (theme) => 
      `linear-gradient(45deg, ${theme.palette.primary.main}, ${theme.palette.primary.light})`,
    backgroundClip: 'text',
    textFillColor: 'transparent',
    WebkitBackgroundClip: 'text',
    WebkitTextFillColor: 'transparent'
  }}
>
  Title
</Typography>
```

### Responsive Design
```javascript
// âœ… DOÄRU: Responsive breakpoints
<Grid
  container
  spacing={2}
  sx={{
    flexDirection: { xs: 'column', md: 'row' },
    alignItems: { xs: 'center', md: 'flex-start' }
  }}
>
  <Grid item xs={12} md={6}>
    Content
  </Grid>
</Grid>
```

## Component Architecture

### Component Structure
```javascript
// âœ… DOÄRU: Component structure
const UserManagement = () => {
  // 1. Hooks
  const { users, loading, error, loadUsers, createUser } = useUserManagement();
  
  // 2. Local state
  const [dialogOpen, setDialogOpen] = useState(false);
  const [selectedUser, setSelectedUser] = useState(null);
  
  // 3. Effects
  useEffect(() => {
    loadUsers();
  }, [loadUsers]);
  
  // 4. Event handlers
  const handleUserEdit = (user) => {
    setSelectedUser(user);
    setDialogOpen(true);
  };
  
  // 5. Render helpers
  const renderUserCard = (user) => (
    <Card key={user._id}>
      <CardContent>
        <Typography>{user.ad} {user.soyad}</Typography>
      </CardContent>
    </Card>
  );
  
  // 6. Main render
  return (
    <Container>
      {error && <Alert severity="error">{error}</Alert>}
      {loading ? (
        <CircularProgress />
      ) : (
        <Grid container spacing={2}>
          {users.map(renderUserCard)}
        </Grid>
      )}
    </Container>
  );
};
```

### Props Validation
```javascript
// âœ… DOÄRU: PropTypes validation
import PropTypes from 'prop-types';

const UserCard = ({ user, onEdit, onDelete }) => {
  return (
    <Card>
      <CardContent>
        <Typography>{user.ad} {user.soyad}</Typography>
        <Button onClick={() => onEdit(user)}>DÃ¼zenle</Button>
      </CardContent>
    </Card>
  );
};

UserCard.propTypes = {
  user: PropTypes.shape({
    _id: PropTypes.string.isRequired,
    ad: PropTypes.string.isRequired,
    soyad: PropTypes.string.isRequired,
    kullaniciAdi: PropTypes.string.isRequired
  }).isRequired,
  onEdit: PropTypes.func.isRequired,
  onDelete: PropTypes.func.isRequired
};
```

## State Management

### Context Pattern
```javascript
// âœ… Context for global state
const AppContext = createContext();

export const AppProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState('light');
  
  const login = useCallback((userData) => {
    setUser(userData);
    localStorage.setItem('user', JSON.stringify(userData));
  }, []);
  
  const logout = useCallback(() => {
    setUser(null);
    localStorage.removeItem('user');
    localStorage.removeItem('token');
  }, []);
  
  const value = {
    user,
    theme,
    login,
    logout,
    setTheme
  };
  
  return (
    <AppContext.Provider value={value}>
      {children}
    </AppContext.Provider>
  );
};

export const useApp = () => {
  const context = useContext(AppContext);
  if (!context) {
    throw new Error('useApp must be used within AppProvider');
  }
  return context;
};
```

## Performance Optimization

### React.memo Pattern
```javascript
// âœ… DOÄRU: Memoized component
const UserCard = React.memo(({ user, onEdit }) => {
  return (
    <Card>
      <CardContent>
        <Typography>{user.ad} {user.soyad}</Typography>
        <Button onClick={() => onEdit(user)}>DÃ¼zenle</Button>
      </CardContent>
    </Card>
  );
});

// âœ… useMemo for expensive calculations
const expensiveValue = useMemo(() => {
  return users.filter(user => user.durum === 'aktif')
    .sort((a, b) => a.ad.localeCompare(b.ad));
}, [users]);

// âœ… useCallback for event handlers
const handleUserEdit = useCallback((user) => {
  setSelectedUser(user);
  setDialogOpen(true);
}, []);
```

### Code Splitting
```javascript
// âœ… DOÄRU: Lazy loading
const UserManagement = React.lazy(() => import('./pages/UserManagement'));
const TaskManagement = React.lazy(() => import('./pages/TaskManagement'));

// Usage with Suspense
<Suspense fallback={<CircularProgress />}>
  <Routes>
    <Route path="/users" element={<UserManagement />} />
    <Route path="/tasks" element={<TaskManagement />} />
  </Routes>
</Suspense>
```

## Error Handling

### Error Boundary
```javascript
// âœ… Error boundary component
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  componentDidCatch(error, errorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <Alert severity="error">
          Bir hata oluÅŸtu. SayfayÄ± yenilemeyi deneyin.
        </Alert>
      );
    }

    return this.props.children;
  }
}
```

### Try-Catch Pattern
```javascript
// âœ… DOÄRU: Async error handling
const handleSubmit = async (data) => {
  setLoading(true);
  setError('');
  
  try {
    await userService.create(data);
    setSuccess('KullanÄ±cÄ± baÅŸarÄ±yla oluÅŸturuldu');
    onClose();
  } catch (error) {
    const message = error.response?.data?.message || 'Bir hata oluÅŸtu';
    setError(message);
  } finally {
    setLoading(false);
  }
};
```

## â­ Modern Rating & Scoring System (2025-01-20)

### Star Rating Implementation
```javascript
// âœ… DOÄRU: Material-UI Rating ile yÄ±ldÄ±z sistemi
import { Rating, Typography, Box } from '@mui/material';

const ScoreDialog = ({ scoringData, onScoreChange }) => {
  const handleStarRating = (index, value) => {
    onScoreChange(index, 'kontrolPuani', value);
  };

  return (
    <Box>
      {scoringData.maddeler?.map((madde, index) => (
        <Paper key={index} sx={{ p: 3, mb: 2 }}>
          <Typography variant='h6' sx={{ mb: 2 }}>
            {madde.soru || `Madde ${index + 1}`}
          </Typography>
          
          {/* 10 YÄ±ldÄ±z Rating System */}
          <Box sx={{ 
            display: 'flex', 
            flexDirection: 'column',
            alignItems: 'center',
            gap: 2,
            py: 2,
            bgcolor: 'grey.50',
            borderRadius: 2,
          }}>
            <Typography variant='body1' sx={{ fontWeight: 'medium' }}>
              Puan:
            </Typography>
            
            <Rating
              name={`rating-${index}`}
              value={madde.kontrolPuani || 0}
              onChange={(event, newValue) => handleStarRating(index, newValue)}
              max={10}
              size="large"
              sx={{
                fontSize: '2rem',
                '& .MuiRating-iconFilled': { color: '#ffd700' },
                '& .MuiRating-iconHover': { color: '#ffb400' },
              }}
            />
            
            <Typography variant='h6' sx={{ 
              fontWeight: 'bold',
              color: madde.kontrolPuani ? 'primary.main' : 'text.secondary',
            }}>
              {madde.kontrolPuani || 0} / 10
            </Typography>
          </Box>
        </Paper>
      ))}
    </Box>
  );
};
```

### Gradient Design System
```javascript
// âœ… Modern gradient backgrounds
const GradientHeader = () => (
  <DialogTitle sx={{
    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
    color: 'white',
    py: 3,
    px: 4,
  }}>
    <Typography variant='h5' sx={{ fontWeight: 'bold' }}>
      Bonus DeÄŸerlendirme
    </Typography>
  </DialogTitle>
);

const ScoreSummaryCard = ({ totalScore, maxScore }) => (
  <Paper elevation={3} sx={{
    p: 3,
    borderRadius: 3,
    background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
    color: 'white',
  }}>
    <Typography variant='h6' sx={{ fontWeight: 'bold', mb: 1 }}>
      Toplam Puan
    </Typography>
    <Typography variant='h3' sx={{ fontWeight: 'bold' }}>
      {totalScore} / {maxScore}
    </Typography>
  </Paper>
);
```

### Interactive UI Patterns
```javascript
// âœ… Hover animations ve transitions
const InteractiveCard = () => (
  <Paper sx={{
    p: 3,
    borderRadius: 3,
    transition: 'all 0.3s ease',
    '&:hover': {
      boxShadow: '0 8px 25px rgba(0,0,0,0.1)',
      transform: 'translateY(-2px)',
    },
  }}>
    <Content />
  </Paper>
);

// âœ… Loading states with smooth transitions
const SubmitButton = ({ submitting, onSubmit }) => (
  <Button
    variant='contained'
    onClick={onSubmit}
    disabled={submitting}
    startIcon={submitting ? <CircularProgress size={16} /> : <SaveIcon />}
    sx={{
      borderRadius: 2,
      px: 4,
      py: 1.5,
      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
      transition: 'all 0.3s ease',
      '&:hover': {
        background: 'linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)',
      },
    }}
  >
    {submitting ? 'Kaydediliyor...' : 'KAYDET'}
  </Button>
);
```

# ğŸ¯ Personnel Tracking System Updates (2025-01-20)

## Modern Role-Based Filtering

### Dynamic Role Filter Chips
```javascript
// âœ… DOÄRU: Role filter with Material-UI Chips
const [selectedRoleFilter, setSelectedRoleFilter] = useState('');

<Paper sx={{ p: 2, mb: 3, bgcolor: 'background.paper' }}>
  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>
    <FilterListIcon color="primary" />
    <Typography variant="h6" color="primary">
      Personel Rol Filtresi
    </Typography>
  </Box>
  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>
    <Chip
      label="TÃ¼mÃ¼"
      variant={selectedRoleFilter === '' ? 'filled' : 'outlined'}
      color={selectedRoleFilter === '' ? 'primary' : 'default'}
      onClick={() => setSelectedRoleFilter('')}
      clickable
    />
    <Chip
      label="Paketlemeci"
      variant={selectedRoleFilter === 'paketlemeci' ? 'filled' : 'outlined'}
      color={selectedRoleFilter === 'paketlemeci' ? 'secondary' : 'default'}
      onClick={() => setSelectedRoleFilter('paketlemeci')}
      clickable
    />
  </Box>
</Paper>
```

## Performance Score Display

### Color-Coded Performance Chips
```javascript
// âœ… DOÄRU: Performance scoring with color coding
<Chip
  label={`${person.avgControlScore || 0}/100`}
  size="small"
  color={
    (person.avgControlScore || 0) >= 80 
      ? 'success' 
      : (person.avgControlScore || 0) >= 60 
      ? 'warning' 
      : 'error'
  }
/>

// âœ… DOÄRU: Performance status display
<Box sx={{ display: 'flex', gap: 0.5 }}>
  <Chip
    label={`GÃ¶rev: ${person.totalTasks || 0}`}
    size="small"
    color="info"
    variant="outlined"
  />
  <Chip
    label={`Kalite: ${person.totalQualityEvaluations || 0}`}
    size="small"
    color="secondary"
    variant="outlined"
  />
</Box>
```

## Machine-Personnel Data Integration

### Conditional Data Rendering
```javascript
// âœ… DOÄRU: Machine-based data with fallback
const displayData = machineBasedData || data;
const machineData = machineBasedData?.machinePersonnelData || data?.machinePersonnel || {};

// âœ… DOÄRU: Performance data conditional rendering
{machineBasedData && (
  <Box sx={{ mb: 2 }}>
    <Typography variant='body2' color='text.secondary' gutterBottom>
      Performans:
    </Typography>
    <Box sx={{ display: 'flex', gap: 0.5, mb: 1 }}>
      <Chip
        label={`${person.avgControlScore || 0}/100`}
        size='small'
        color={getPerformanceColor(person.avgControlScore)}
      />
    </Box>
  </Box>
)}
```

## Statistics Dashboard

### Real-time Statistics Cards
```javascript
// âœ… DOÄRU: Real-time statistics with conditional styling
{machineBasedData && (
  <Box sx={{ mt: 2, p: 2, bgcolor: 'action.hover', borderRadius: 1 }}>
    <Grid container spacing={2}>
      <Grid item xs={12} sm={3}>
        <Typography variant="body2" color="text.secondary">
          Ortalama Puan
        </Typography>
        <Typography 
          variant="h6" 
          color={machineBasedData.stats.avgSystemScore >= 70 ? 'success.main' : 'warning.main'}
        >
          {machineBasedData.stats.avgSystemScore}/100
        </Typography>
      </Grid>
    </Grid>
  </Box>
)}
```

## API Integration Patterns

### Multiple Endpoint Data Loading
```javascript
// âœ… DOÄRU: Separate data loading for enhanced features
const loadMachineBasedData = useCallback(async (roleFilter = '') => {
  try {
    setLoading(true);
    console.log('ğŸ”„ Makina bazlÄ± veri yÃ¼kleniyor, rol filtresi:', roleFilter);
    
    const response = await fetch(
      `/api/personnel-tracking/machine-based${roleFilter ? `?roleFilter=${roleFilter}` : ''}`,
      {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`,
          'Content-Type': 'application/json',
        },
      }
    );
    
    const result = await response.json();
    
    if (result.success) {
      setMachineBasedData(result.data);
    }
  } catch (error) {
    console.error('Machine-based data error:', error);
    showSnackbar('Makina bazlÄ± veri yÃ¼klenirken hata oluÅŸtu: ' + error.message, 'error');
  } finally {
    setLoading(false);
  }
}, [showSnackbar]);

// âœ… DOÄRU: Tab-based data loading
useEffect(() => {
  if (activeTab === 0) {
    loadMachineBasedData(selectedRoleFilter);
  }
}, [activeTab, selectedRoleFilter, loadMachineBasedData]);
```

## Empty State Handling

### Context-Aware Empty States
```javascript
// âœ… DOÄRU: Contextual empty state messages
{Object.keys(machineData).length === 0 && (
  <Paper sx={{ p: 4, textAlign: 'center' }}>
    <MachineIcon sx={{ fontSize: 64, color: 'text.disabled', mb: 2 }} />
    <Typography variant="h6" color="text.secondary">
      {selectedRoleFilter 
        ? `${selectedRoleFilter} rolÃ¼nde makina atanmÄ±ÅŸ personel bulunamadÄ±`
        : 'Makina atanmÄ±ÅŸ personel bulunamadÄ±'
      }
    </Typography>
  </Paper>
)}
```